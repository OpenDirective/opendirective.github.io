<!DOCTYPE html>
<html lang="en-GB">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="/azureserverless/xmlrpc.php">

	<title>Using reactive streams on serverless with cyclejs, xstream and Azure Functions &#8211; AzureServerless</title>
<meta name='robots' content='noindex,follow' />
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//secure.gravatar.com' />
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="AzureServerless &raquo; Feed" href="/azureserverless/feed/" />
<link rel="alternate" type="application/rss+xml" title="AzureServerless &raquo; Comments Feed" href="/azureserverless/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="AzureServerless &raquo; Using reactive streams on serverless with cyclejs, xstream and Azure Functions Comments Feed" href="/azureserverless/2017/02/25/using-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.8"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='crayon-css'  href='/azureserverless/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-classic-css'  href='/azureserverless/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='/azureserverless/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='styleguide-fonts-css'  href='https://fonts.googleapis.com/css?family=Helvetica%3A400%2C700&#038;subset=latin%2Clatin-ext&#038;ver=4.9.8' type='text/css' media='all' />
<link rel='stylesheet' id='dashicons-css'  href='/azureserverless/wp-includes/css/dashicons.min.css?ver=4.9.8' type='text/css' media='all' />
<link rel='stylesheet' id='kent-style-css'  href='/azureserverless/wp-content/themes/kent/styles/css/styles.css?ver=1.1' type='text/css' media='all' />
<link rel='stylesheet' id='kent-animate-css'  href='/azureserverless/wp-content/themes/kent/styles/css/animate.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='/azureserverless/wp-content/plugins/jetpack/_inc/genericons/genericons/genericons.css?ver=3.1' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack-widget-social-icons-styles-css'  href='/azureserverless/wp-content/plugins/jetpack/modules/widgets/social-icons/social-icons.css?ver=20170506' type='text/css' media='all' />
<link rel='stylesheet' id='social-logos-css'  href='/azureserverless/wp-content/plugins/jetpack/_inc/social-logos/social-logos.min.css?ver=1' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='/azureserverless/wp-content/plugins/jetpack/css/jetpack.css?ver=6.5' type='text/css' media='all' />
<script type='text/javascript' src='/azureserverless/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/azureserverless/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='/azureserverless/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=_2.7.2_beta'></script>
<style>
    #cover-image {
        background-image: url( /azureserverless/wp-content/uploads/2016/11/cropped-FunctionHeader2.png);
    }
    #branding h1#logo a { color:#1e73be; }
    #branding h1#logo a:hover { color:#1e73be; }
</style>
<link rel='https://api.w.org/' href='/azureserverless/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/azureserverless/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/azureserverless/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Azure options for serving static web content' href='/azureserverless/2017/01/17/azure-options-for-serving-static-web-content/' />
<link rel='next' title='Using Serverless Azure Functions with Auth0 and Google APIs' href='/azureserverless/2017/03/15/using-serverless-azure-functions-with-auth0-and-google-apis/' />
<meta name="generator" content="WordPress 4.9.8" />
<link rel="canonical" href="/azureserverless/2017/02/25/using-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions/" />
<link rel='shortlink' href='https://wp.me/p84MQ3-3A' />
<link rel="alternate" type="application/json+oembed" href="/azureserverless/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2F2017%2F02%2F25%2Fusing-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions%2F" />
<link rel="alternate" type="text/xml+oembed" href="/azureserverless/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2F2017%2F02%2F25%2Fusing-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions%2F&#038;format=xml" />

<!-- Bad Behavior 2.2.22 run time: 3.900 ms -->

<link rel='dns-prefetch' href='//v0.wordpress.com'/>
<link rel='dns-prefetch' href='//jetpack.wordpress.com'/>
<link rel='dns-prefetch' href='//s0.wp.com'/>
<link rel='dns-prefetch' href='//s1.wp.com'/>
<link rel='dns-prefetch' href='//s2.wp.com'/>
<link rel='dns-prefetch' href='//public-api.wordpress.com'/>
<link rel='dns-prefetch' href='//0.gravatar.com'/>
<link rel='dns-prefetch' href='//1.gravatar.com'/>
<link rel='dns-prefetch' href='//2.gravatar.com'/>
<style type='text/css'>img#wpstats{display:none}</style><style>
#main header.masthead h1.logo a,
#main header.masthead h2.description {
color:#1e73be;}
</style>
<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #ffffff; }
</style>

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Using reactive streams on serverless with cyclejs, xstream and Azure Functions" />
<meta property="og:url" content="/2017/02/25/using-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions/" />
<meta property="og:description" content="This post originally appeared on my accessibility blog &#8211; Opening Accessibility] [ Update 2016-10-23 the code is now in the cyclejs community repo] During development of my latest SaaS product…" />
<meta property="article:published_time" content="2017-02-25T11:18:31+00:00" />
<meta property="article:modified_time" content="2017-02-25T11:22:39+00:00" />
<meta property="og:site_name" content="AzureServerless" />
<meta property="og:image" content="http://stiller.co.il/blog/wp-content/uploads/2016/04/Azure-Functions-Logo.png" />
<meta property="og:image:width" content="277" />
<meta property="og:image:height" content="278" />
<meta property="og:locale" content="en_GB" />
<meta name="twitter:creator" content="@AzureServerless" />
<meta name="twitter:site" content="@SteveALee" />
<meta name="twitter:text:title" content="Using reactive streams on serverless with cyclejs, xstream and Azure Functions" />
<meta name="twitter:card" content="summary" />

<!-- End Jetpack Open Graph Tags -->
<link rel="icon" href="/azureserverless/wp-content/uploads/2016/11/cropped-Functions-32x32.png" sizes="32x32" />
<link rel="icon" href="/azureserverless/wp-content/uploads/2016/11/cropped-Functions-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon-precomposed" href="/azureserverless/wp-content/uploads/2016/11/cropped-Functions-180x180.png" />
<meta name="msapplication-TileImage" content="/wp-content/uploads/2016/11/cropped-Functions-270x270.png" />
<!-- Styleguide styles -->
<style>body,
	.page-main-nav a span {
		font-family: "Helvetica Neue", Helvetica, sans-serif;
		font-weight: inherit;
	}
	h1, h2, h3, h4, h5, h6 {
		font-family: {{font-headers}};
		font-weight: {{font-headers-weight}};
	}
	.page-main-nav a,
	.main a,
	a {
		color: #8224e3;
	}
	.main a:hover,
	a:hover {
		color: #621baa;
	}
	.col-sidebar,
	#main article.sticky:after,
	.page-main-nav a:hover,
	blockquote {
		border-color: #8224e3;
	}
	#main article.sticky:after {
		border-bottom-color:transparent;
	}
	#main article .tags a:hover,
	#main article .categories a:hover,
	nav.menu,
	.page-main-nav a:hover,
	#main .pagination span,
	#main .archive-pagination span,
	#main .pagination span.current,
	#main .archive-pagination span.current {
		background-color: #8224e3;
		color: #ffffff;
	}
	nav.menu ul li a:hover,
	nav.menu ul li a.menu-expand:hover,
	nav.menu ul li a.menu-expand {
		background-color: #621baa;
		color: #ffffff;
	}
	#main article.sticky {
		background-color: #f3eafd;
		color: #000000;
	}
	nav.menu a.menu-close {
		background-color: #411272;
		color: #8224e3;
	}
	nav.menu a.menu-close:hover {
		background-color: #0d0417;
		color: #8224e3;
	}
	nav.menu form.searchform,
	nav.menu ul li {
		border-color: #621baa;
	}
	#main .writer {
		border-top-color: #8224e3;
	}</style></head>

<body class="post-template-default single single-post postid-222 single-format-standard custom-background">

	<nav class="menu" role="navigation">
		<a href="#" class="menu-close">&lsaquo; return</a>
<form method="get" class="searchform animated" action="/azureserverless/">
	<fieldset>
		<input type="text" value="" name="s" class="searchfield" placeholder="Search..." />
		<button class="searchsubmit">&#62464;</button>
	</fieldset>
</form>
<div class="menu-menu-1-container"><ul id="nav" class="menu-wrap animated"><li id="menu-item-73" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-73"><a href="/azureserverless/test/">Welcome to AzureServerless</a></li>
<li id="menu-item-123" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-123"><a href="/azureserverless/what-is-serverless/">What is Serverless?</a></li>
<li id="menu-item-99" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-99"><a href="/azureserverless/azure-features-for-serverless/">Azure features for Serverless</a></li>
<li id="menu-item-98" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-98"><a href="/azureserverless/getting-started/">Getting Started with Functions and LogicApps</a></li>
<li id="menu-item-75" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-75"><a href="/azureserverless/blog/">Blog</a></li>
<li id="menu-item-84" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-84"><a href="/azureserverless/get-the-newsletter/">Get the Newsletter</a></li>
</ul></div>	</nav>

	<div class="container">
		<div class="page-main-nav">
			<a class="link-open-nav"><span>Menu</span></a>
			<a class="link-home" href="/azureserverless/"><span>Home</span></a>
		</div>

		<div id="aside">
			<div id="cover-image">
				<div class="social_container animated fadeInDown">
<div class="social_links"><a href="https://twitter.com/AzureServerless" class="social_link_twitter"><span>twitter</span></a></div>				</div>
			</div>
		</div>

		<div id="main" class="main">
			<header class="masthead animated fadeInLeft" role="banner">
				<div class="branding">
					<h1 class="logo">
						<a href="/azureserverless/" title="Home">
							AzureServerless						</a>
					</h1>
					<h2 class="description">
						Using Microsoft Azure in a Serverless mode					</h2>
				</div>
			</header>
<article id="post-222" class="post-222 post type-post status-publish format-standard hentry category-uncategorized tag-reactive tag-serverless">
	<h1 class="posttitle">
		Using reactive streams on serverless with cyclejs, xstream and Azure Functions	</h1>
		<p class="postmetadata">
By <span class="author vcard"><a class="url fn n" href="/azureserverless/author/steveopendirective-com/" title="View all posts by steve@opendirective.com" rel="author">steve@opendirective.com</a></span> on <a href="/azureserverless/2017/02/25/using-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions/" title="11:18 am" rel="bookmark"><time class="entry-date" datetime="2017-02-25T11:18:31+00:00">February 25, 2017</time></a>	&bull; <span class="commentcount">( <a href="/azureserverless/2017/02/25/using-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions/#respond">Leave a comment</a> )</span>
	</p>
	<section class="entry">
<p>This post originally appeared on my accessibility blog &#8211; <a href="http://opendirective.net/blog/2016/10/exploring-reactive-streams-with-serverless-xstream-cyclejs-and-azure-functions/">Opening Accessibility</a>]</p>
<p>[ Update 2016-10-23 the code is now in the <a href="https://github.com/cyclejs-community/cycle-serverless">cyclejs community repo</a>]</p>
<p>During development of my latest SaaS product, Brian, I&#8217;ve settled on a couple of key architectural decisions. For the Frontend I&#8217;m using Reactive programming (RP) with streams and for the backend I&#8217;ve decided on the &#8216;Serverless&#8217; (FaaS) approach. Specifically, I&#8217;m using  Andre Stalz&#8217;s <a href="http://staltz.com/xstream">xstream</a> with the incredibly light &#8216;framework&#8217; <a href="https://cycle.js.org/">cyclejs</a> (but cyclejs supports other streaming libs, including the excellent <a href="https://rxjs.codeplex.com/">RxJS</a>) . Microsoft&#8217;s <a href="https://azure.microsoft.com/en-us/services/functions/">Azure Functions</a> give a FaaS solution backed-up by many other options including BaaS &amp; PaaS should they be required. This post looks at using them together on the backend.</p>
<div style="width: 285px" class="wp-caption alignleft"><img src="https://cycle.js.org/img/cyclejs_logo.svg" alt="Cyclejs logo" width="275" height="275" /><p class="wp-caption-text">Cyclejs</p></div>
<div style="width: 287px" class="wp-caption alignleft"><img src="http://stiller.co.il/blog/wp-content/uploads/2016/04/Azure-Functions-Logo.png" alt="Azure Functions logo" width="277" height="278" /><p class="wp-caption-text">Azure Functions</p></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>I&#8217;m happy that the trade-offs and benefits with these approaches should meet my requirements. Namely, achieving  rapid development by focussing energy higher &#8216;up the stack&#8217;. I want to concentrate on innovation of user features and &#8216;business logic&#8217; and not boilerplate or DevOps. From my early explorations I think Serverless and cyclejs manage to hit sweet spots of benefit and learning curve. However, they are most definitely not silver bullets, having wrinkles all their own that take time and effort to learn and overcome.</p>
<p>When I initially created Functions code using a traditional imperative style I rapidly found I missed the RP style I&#8217;d become familiar with when using CycleJS with RxJS. It&#8217;s a style that gets under your skin once you make the mental shift. Perhaps my background in real-time async communications predisposes me to seeing the benefits of asynchronous handling of streams. But whatever, I thought it would be fun to try it in the serverless context. At least both front and back ends would then be similar in architecture.</p>
<p>You may wonder why on earth I would consider using RP in a FaaS context. After all, the  FaaS architecture is all about small functions which are run once triggered and then quickly end. Thus, it would seem there isn&#8217;t much scope for streams when there is single trigger input event plus perhaps another data source or two.  One often touted advantage of RP is that it&#8217;s pure functions are easier to test, but that&#8217;s also a recommend practice with FaaS so that&#8217;s not an obvious advantage for having RP as well as FaaS.</p>
<p>One reason for wanting to use RP is that any non trivial functions are likely to have other asynchronous event sources, including SaaS requests and database updates over REST. Even so, there are other less tangible benefits of RP with cyclejs that I personally I found over imperative code style:</p>
<ul>
<li>Loose coupling through reactive observers</li>
<li>Declarative style married to functional programming techniques</li>
<li>Separation of input, output side effects from the &#8220;pure&#8221; business logic</li>
</ul>
<p>Together these engender a clean high-level way to describe program logic. Bugs also appear to be reduced and it also enables testing without excessive mocking due to the absence of side effects in the main code. Sometimes however, debugging can be more involved due to current tooling supporting imperative and not reactive. However, tooling is starting to appear as more turn to RP.</p>
<p>So what are the differences found when running xstream and cyclejs on Azure Functions environment compared to the usual browser (and sometimes nodejs) contexts?Surprisingly few it turns out. Fortunately, Functions builds on Azure Web Apps which supports nodejs and express. Better, it&#8217;s node 6.x that is provided which includes all those key ES6 features that really help clean up RP code. Another plus is that the cycle HTTP driver works fine on node.</p>
<p>In this implementation I&#8217;ve taken the approach of providing a cycle runtime in each Azure Function. Effectively, each Function is a component in the cycle sense of the word, though connections between components will have to be via HTTP, queues or other out of process couplings. This approach seems to be the a good choice as you can use Cyclejs or not for any individual function, depending on the complexity and preferences. As the Functions run time is open source there is scope to explore different and more deeply embedded approaches.</p>
<p>So without further a-do here&#8217;s the Functions driver code.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5b9fdfbe5af70718192742" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
const xs = require('xstream').default

module.exports = function makeFunctionsDriver(context, dispwrap, inArgs) {

    function driver(s$) {
        s$.addListener({ next: (i) =&gt; { setTimeout(() =&gt; {  // next tick to allow other listenerns to be iterated
                                            context.res = i 
                                            if (dispwrap &amp;&amp;
                                                typeof dispwrap.disposer === 'function') {
                                                dispwrap.disposer()
                                            }
                                            context.done()
                                            }, 1)
                         },   
                         error: () =&gt; {},
                         complete: () =&gt; {}
        })

        return xs.createWithMemory({
            start: listener =&gt; {
                setTimeout(() =&gt; {listener.next({context, inArgs})}, 1)
            },
            stop: () =&gt; {},
        })

  
    }

    const logger = a =&gt; context.log(a)
    return {driver, logger}
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5b9fdfbe5af70718192742-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af70718192742-2">2</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af70718192742-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af70718192742-4">4</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af70718192742-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af70718192742-6">6</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af70718192742-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af70718192742-8">8</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af70718192742-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af70718192742-10">10</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af70718192742-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af70718192742-12">12</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af70718192742-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af70718192742-14">14</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af70718192742-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af70718192742-16">16</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af70718192742-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af70718192742-18">18</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af70718192742-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af70718192742-20">20</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af70718192742-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af70718192742-22">22</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af70718192742-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af70718192742-24">24</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af70718192742-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af70718192742-26">26</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af70718192742-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af70718192742-28">28</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af70718192742-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af70718192742-30">30</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af70718192742-31">31</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9fdfbe5af70718192742-1"><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">xs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'xstream'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-st">default</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af70718192742-2">&nbsp;</div><div class="crayon-line" id="crayon-5b9fdfbe5af70718192742-3"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">makeFunctionsDriver</span><span class="crayon-sy">(</span><span class="crayon-v">context</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">dispwrap</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">inArgs</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af70718192742-4">&nbsp;</div><div class="crayon-line" id="crayon-5b9fdfbe5af70718192742-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">driver</span><span class="crayon-sy">(</span><span class="crayon-v">s</span><span class="crayon-sy">$</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af70718192742-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">s</span><span class="crayon-sy">$</span><span class="crayon-sy">.</span><span class="crayon-e">addListener</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-v">next</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-r">setTimeout</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-c">// next tick to allow other listenerns to be iterated</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af70718192742-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">context</span><span class="crayon-sy">.</span><span class="crayon-v">res</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af70718192742-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">dispwrap</span><span class="crayon-h"> </span><span class="crayon-o">&amp;&amp;</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af70718192742-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">typeof</span><span class="crayon-h"> </span><span class="crayon-v">dispwrap</span><span class="crayon-sy">.</span><span class="crayon-v">disposer</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-h"> </span><span class="crayon-s">'function'</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af70718192742-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">dispwrap</span><span class="crayon-sy">.</span><span class="crayon-e">disposer</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af70718192742-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af70718192742-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">context</span><span class="crayon-sy">.</span><span class="crayon-e">done</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af70718192742-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af70718192742-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h">&nbsp;&nbsp; </span></div><div class="crayon-line" id="crayon-5b9fdfbe5af70718192742-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">error</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af70718192742-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">complete</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af70718192742-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af70718192742-18">&nbsp;</div><div class="crayon-line" id="crayon-5b9fdfbe5af70718192742-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">xs</span><span class="crayon-sy">.</span><span class="crayon-e">createWithMemory</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af70718192742-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">start</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">listener</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af70718192742-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">setTimeout</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">listener</span><span class="crayon-sy">.</span><span class="crayon-e">next</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-v">context</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">inArgs</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af70718192742-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af70718192742-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">stop</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af70718192742-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af70718192742-25">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af70718192742-26"><span class="crayon-h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af70718192742-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af70718192742-28">&nbsp;</div><div class="crayon-line" id="crayon-5b9fdfbe5af70718192742-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">logger</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">context</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af70718192742-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">driver</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">logger</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af70718192742-31"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0090 seconds] -->
<p>As with all drivers, the Function driver is there to handle useful side effects such as input and output. In this case it converts the Function inputs (&#8220;context&#8221; and an array of input bindings) into a source stream. It also sinks a stream containing the function&#8217;s output. This also acts as a signal that the function should complete (the driver calls context.done).  The sink also disposes of the streams created by run() for cleanup (this adds a little implementation complexity due to a forward declaration and JS&#8217;s lack of true pass-by-reference).</p>
<p>It turns out that using console.log is not useful in Functions, rather the alternative context.log is used. Thus, we also provide a Log driver that uses this channel. This is also used with xstream&#8217;s debug operator, which fortunately accepts a function argument as well as a value. I also decided the FunctionsDriver factory would return the log function itself as well as the driver. In this way nearly all the FaaS platform dependencies are encapsulated in the driver. This makes it possible to write a version for AWS Lamda or other serverless frameworks.</p>
<p>Here&#8217;s an example usage for a HTTP Function. It starts a 1 second ticker and on the 3rd tick makes a REST API request. It then returns the first item from the response in function output. The code demonstrates the use of all the driver features and the clarity of RP with cyclejs.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5b9fdfbe5af88127369286" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
const xs = require('xstream').default
const run = require('@cycle/xstream-run').run
const makeHTTPDriver = require('@cycle/http').makeHTTPDriver
const makeFunctionsDriver = require('./functionsDriver.js')

module.exports = function (context, ...inArgs) {
    const dispwrap = {}             // because JS doesn't do pass-by-ref
    const {driver: functionsDriver, logger} = makeFunctionsDriver(context, dispwrap, inArgs)

    const drivers = {
        FaaS: functionsDriver,
        HTTP: makeHTTPDriver(),
        log: msg$ =&gt; { msg$.addListener({next: msg =&gt; logger(`${msg}`) }) }
    }

    dispwrap.disposer = run(main, drivers)
   
    function main(sources) {
        const input$ = sources.FaaS
            .map((s) =&gt; `context.req.originalUrl: ${s.context.req.originalUrl} /
                         inArgs[0]: ${JSON.stringify(s.inArgs[0])}`)
            
        const ticks$ = xs.periodic(1000)
            .map(t =&gt; (t + 1) * 100)
        
        const log$ = xs.merge(input$, ticks$)

        const trigger$ = ticks$
            .drop(2)
            .debug((i) =&gt; logger(`trigger tick: ${i}`))
 
        const request$ = trigger$
            .map(() =&gt; ({
                            url: 'http://jsonplaceholder.typicode.com/users/1',
                            method: 'GET'
                        }))

        const response$ = sources.HTTP
            .select()
            .flatten()
        const user1Data$ = response$.map(response =&gt; response.body)
        const exit$ = user1Data$
            .map(u =&gt; ({ status: 200, body: u}))

        return {
            FaaS: exit$,
            log: log$,
            HTTP: request$
        }
    }
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-2">2</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-4">4</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-6">6</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-8">8</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-10">10</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-12">12</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-14">14</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-16">16</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-18">18</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-20">20</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-22">22</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-24">24</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-26">26</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-28">28</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-30">30</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-32">32</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-34">34</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-36">36</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-38">38</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-40">40</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-42">42</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-44">44</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-46">46</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-48">48</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9fdfbe5af88127369286-50">50</div><div class="crayon-num" data-line="crayon-5b9fdfbe5af88127369286-51">51</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-1"><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">xs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'xstream'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-st">default</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-2"><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">run</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'@cycle/xstream-run'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">run</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-3"><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">makeHTTPDriver</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'@cycle/http'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">makeHTTPDriver</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-4"><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">makeFunctionsDriver</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'./functionsDriver.js'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-6"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">context</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-v">inArgs</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">dispwrap</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-c">// because JS doesn't do pass-by-ref</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">driver</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">functionsDriver</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">logger</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">makeFunctionsDriver</span><span class="crayon-sy">(</span><span class="crayon-v">context</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">dispwrap</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">inArgs</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">drivers</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">FaaS</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">functionsDriver</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">HTTP</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">makeHTTPDriver</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">log</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">$</span><span class="crayon-sy">.</span><span class="crayon-e">addListener</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-v">next</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">logger</span><span class="crayon-sy">(</span><span class="crayon-sy">`</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">msg</span><span class="crayon-sy">}</span><span class="crayon-sy">`</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-15">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">dispwrap</span><span class="crayon-sy">.</span><span class="crayon-v">disposer</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">run</span><span class="crayon-sy">(</span><span class="crayon-v">main</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">drivers</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-17"><span class="crayon-h">&nbsp;&nbsp; </span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-v">sources</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">input</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">sources</span><span class="crayon-sy">.</span><span class="crayon-i">FaaS</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">map</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">s</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">`</span><span class="crayon-v">context</span><span class="crayon-sy">.</span><span class="crayon-v">req</span><span class="crayon-sy">.</span><span class="crayon-v">originalUrl</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">s</span><span class="crayon-sy">.</span><span class="crayon-v">context</span><span class="crayon-sy">.</span><span class="crayon-v">req</span><span class="crayon-sy">.</span><span class="crayon-v">originalUrl</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-o">/</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">inArgs</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">JSON</span><span class="crayon-sy">.</span><span class="crayon-e">stringify</span><span class="crayon-sy">(</span><span class="crayon-v">s</span><span class="crayon-sy">.</span><span class="crayon-v">inArgs</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">}</span><span class="crayon-sy">`</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">ticks</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">xs</span><span class="crayon-sy">.</span><span class="crayon-e">periodic</span><span class="crayon-sy">(</span><span class="crayon-cn">1000</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">map</span><span class="crayon-sy">(</span><span class="crayon-v">t</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">t</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">100</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">log</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">xs</span><span class="crayon-sy">.</span><span class="crayon-e">merge</span><span class="crayon-sy">(</span><span class="crayon-v">input</span><span class="crayon-sy">$</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ticks</span><span class="crayon-sy">$</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-27">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">trigger</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ticks</span><span class="crayon-sy">$</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">drop</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">debug</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">logger</span><span class="crayon-sy">(</span><span class="crayon-sy">`</span><span class="crayon-e">trigger </span><span class="crayon-v">tick</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">i</span><span class="crayon-sy">}</span><span class="crayon-sy">`</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-31"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">trigger</span><span class="crayon-sy">$</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">map</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">url</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'http://jsonplaceholder.typicode.com/users/1'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">method</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'GET'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-37">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">sources</span><span class="crayon-sy">.</span><span class="crayon-i">HTTP</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">select</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">flatten</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">user1Data</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">$</span><span class="crayon-sy">.</span><span class="crayon-e">map</span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-v">body</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">exit</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">user1Data</span><span class="crayon-sy">$</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">map</span><span class="crayon-sy">(</span><span class="crayon-v">u</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-v">status</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">body</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">u</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-44">&nbsp;</div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">FaaS</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">exit</span><span class="crayon-sy">$</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">log</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">log</span><span class="crayon-sy">$</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">HTTP</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">$</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9fdfbe5af88127369286-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5b9fdfbe5af88127369286-51"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0172 seconds] -->
<p>One issue that needs to be ironed out is sometimes exceptions such as syntax errors get lost and not presented in the Functions Logs. That&#8217;s probably xstream not re throwing captured exceptions. For now the fix is to put try&#8230;catch(log) blocks around parts of the code to get visibility.</p>
<p>What do you think. Does this approach work for you?</p>
<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-222" class="share-twitter sd-button share-icon" href="/azureserverless/2017/02/25/using-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions/?share=twitter" target="_blank" title="Click to share on Twitter"><span>Twitter</span></a></li><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-222" class="share-facebook sd-button share-icon" href="/azureserverless/2017/02/25/using-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions/?share=facebook" target="_blank" title="Click to share on Facebook"><span>Facebook</span></a></li><li class="share-email"><a rel="nofollow noopener noreferrer" data-shared="" class="share-email sd-button share-icon" href="/azureserverless/2017/02/25/using-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions/?share=email" target="_blank" title="Click to email this to a friend"><span>Email</span></a></li><li class="share-linkedin"><a rel="nofollow noopener noreferrer" data-shared="sharing-linkedin-222" class="share-linkedin sd-button share-icon" href="/azureserverless/2017/02/25/using-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions/?share=linkedin" target="_blank" title="Click to share on LinkedIn"><span>LinkedIn</span></a></li><li class="share-reddit"><a rel="nofollow noopener noreferrer" data-shared="" class="share-reddit sd-button share-icon" href="/azureserverless/2017/02/25/using-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions/?share=reddit" target="_blank" title="Click to share on Reddit"><span>Reddit</span></a></li><li class="share-end"></li></ul></div></div></div>		<p class="categories">Categories: <a href="/azureserverless/category/uncategorized/" rel="category tag">Uncategorized</a>		</p>
<p class="tags">Tagged as: <a href="/azureserverless/tag/reactive/" rel="tag">reactive</a> <a href="/azureserverless/tag/serverless/" rel="tag">serverless</a></p>	<div class="writer">
		<img alt='' src='http://0.gravatar.com/avatar/9cf3b2625e7daf7aa5d01542fbedb2c5?s=100&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/9cf3b2625e7daf7aa5d01542fbedb2c5?s=200&#038;d=mm&#038;r=g 2x' class='avatar avatar-100 photo' height='100' width='100' />		<h3>steve@opendirective.com</h3>
			</div>
	</section>
</article>

<nav class="postnav" role="navigation">
	<div class="prev">
		<span class="more-link"><a href="/azureserverless/2017/01/17/azure-options-for-serving-static-web-content/" rel="prev">Azure options for serving static web content</a></span>	</div>
	<div class="next">
		<span class="more-link"><a href="/azureserverless/2017/03/15/using-serverless-azure-functions-with-auth0-and-google-apis/" rel="next">Using Serverless Azure Functions with Auth0 and Google APIs</a></span>	</div>
</nav>

		<div id="respond" class="comment-respond">
							<h3 id="reply-title" class="comment-reply-title">Leave a Reply					<small><a rel="nofollow" id="cancel-comment-reply-link" href="/azureserverless/2017/02/25/using-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions/#respond" style="display:none;">Cancel reply</a></small>
				</h3>
						<form id="commentform" class="comment-form">
				<iframe title="Comment Form" src="http://jetpack.wordpress.com/jetpack-comment/?blogid=119351739&#038;postid=222&#038;comment_registration=0&#038;require_name_email=1&#038;stc_enabled=1&#038;stb_enabled=1&#038;show_avatars=1&#038;avatar_default=mystery&#038;greeting=Leave+a+Reply&#038;greeting_reply=Leave+a+Reply+to+%25s&#038;color_scheme=light&#038;lang=en_GB&#038;jetpack_version=6.5&#038;show_cookie_consent=10&#038;has_cookie_consent=0&#038;sig=69cb2cc062caf0d72ff5637e820d5d4432ff3fac#parent=%2F2017%2F02%2F25%2Fusing-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions%2F" style="width:100%; height: 430px; border:0;" name="jetpack_remote_comment" class="jetpack_remote_comment" id="jetpack_remote_comment" sandbox="allow-same-origin allow-top-navigation allow-scripts allow-forms allow-popups"></iframe>
									<!--[if !IE]><!-->
					<script>
						document.addEventListener('DOMContentLoaded', function () {
							var commentForms = document.getElementsByClassName('jetpack_remote_comment');
							for (var i = 0; i < commentForms.length; i++) {
								commentForms[i].allowTransparency = false;
								commentForms[i].scrolling = 'no';
							}
						});
					</script>
					<!--<![endif]-->
							</form>
		</div>

		
		<input type="hidden" name="comment_parent" id="comment_parent" value="" />

		<aside class="col-sidebar">
<section id="mc4wp_form_widget-3" class="widget widget_mc4wp_form_widget"><div class="widget-wrap"><h3 class="widgettitle">Newsletter</h3><script>(function() {
	if (!window.mc4wp) {
		window.mc4wp = {
			listeners: [],
			forms    : {
				on: function (event, callback) {
					window.mc4wp.listeners.push({
						event   : event,
						callback: callback
					});
				}
			}
		}
	}
})();
</script><!-- MailChimp for WordPress v4.2.5 - https://wordpress.org/plugins/mailchimp-for-wp/ --><form id="mc4wp-form-1" class="mc4wp-form mc4wp-form-70" method="post" data-id="70" data-name="Subscribe" ><div class="mc4wp-form-fields"><p>
	<label for="email">Join our newsletter for updates and extras:</label>
	<input type="email" id="email" name="EMAIL" placeholder="Your email address" required />
	<input type="submit" value="Sign up" />
</p></div><label style="display: none !important;">Leave this field empty if you're human: <input type="text" name="_mc4wp_honeypot" value="" tabindex="-1" autocomplete="off" /></label><input type="hidden" name="_mc4wp_timestamp" value="1537204158" /><input type="hidden" name="_mc4wp_form_id" value="70" /><input type="hidden" name="_mc4wp_form_element_id" value="mc4wp-form-1" /><div class="mc4wp-response"></div></form><!-- / MailChimp for WordPress Plugin --></div></section><section id="search-2" class="widget widget_search"><div class="widget-wrap"><form method="get" class="searchform animated" action="/azureserverless/">
	<fieldset>
		<input type="text" value="" name="s" class="searchfield" placeholder="Search..." />
		<button class="searchsubmit">&#62464;</button>
	</fieldset>
</form>
</div></section>		<section id="recent-posts-2" class="widget widget_recent_entries"><div class="widget-wrap">		<h3 class="widgettitle">Recent Posts</h3>		<ul>
											<li>
					<a href="/azureserverless/2017/08/22/watching-typescript-files-while-developing-local-functions/">Watching TypeScript files while developing local Functions</a>
									</li>
											<li>
					<a href="/azureserverless/2017/08/20/why-use-asyncawait-for-your-javascript-azurefunctions/">Why use async/await for your JavaScript AzureFunctions?</a>
									</li>
											<li>
					<a href="/azureserverless/2017/08/18/all-about-function-app-settings-for-storing-secrets/">All about Function App Settings for storing secrets</a>
									</li>
											<li>
					<a href="/azureserverless/2017/08/12/deploying-to-azure-functions-from-npm-scripts/">Deploying to Azure Functions and Blob Storage from npm scripts</a>
									</li>
											<li>
					<a href="/azureserverless/2017/07/29/getting-started-with-azure-container-instances-on-bash-on-ubuntu-for-windows/">Getting started with Azure Container Instances on Bash on Ubuntu for Windows</a>
									</li>
					</ul>
		</div></section><section id="pages-2" class="widget widget_pages"><div class="widget-wrap"><h3 class="widgettitle">Pages</h3>		<ul>
			<li class="page_item page-item-92"><a href="/azureserverless/azure-features-for-serverless/">Azure features for Serverless</a></li>
<li class="page_item page-item-5"><a href="/azureserverless/blog/">Blog</a></li>
<li class="page_item page-item-82"><a href="/azureserverless/get-the-newsletter/">Get the Newsletter</a></li>
<li class="page_item page-item-94"><a href="/azureserverless/getting-started/">Getting Started with Functions and LogicApps</a></li>
<li class="page_item page-item-7"><a href="/azureserverless/test/">Welcome to AzureServerless</a></li>
<li class="page_item page-item-119"><a href="/azureserverless/what-is-serverless/">What is Serverless?</a></li>
		</ul>
		</div></section><section id="text-3" class="widget widget_text"><div class="widget-wrap">			<div class="textwidget">Artwork copyright @crpietschmann,  Functions logo by @crandycodes</div>
		</div></section></aside>
		<footer role="contentinfo" id="footer">
			<a href="http://wordpress.org/" title="A Semantic Personal Publishing Platform" rel="generator">Proudly powered by WordPress</a>
			<span class="sep"> | </span>
			Theme: Kent by <a href="https://prothemedesign.com/" rel="designer">Pro Theme Design</a>.		</footer>
	</div>
</div>

	<div style="display:none">
	<div class="grofile-hash-map-9cf3b2625e7daf7aa5d01542fbedb2c5">
	</div>
	</div>
<script>(function() {function addEventListener(element,event,handler) {
	if(element.addEventListener) {
		element.addEventListener(event,handler, false);
	} else if(element.attachEvent){
		element.attachEvent('on'+event,handler);
	}
}function maybePrefixUrlField() {
	if(this.value.trim() !== '' && this.value.indexOf('http') !== 0) {
		this.value = "http://" + this.value;
	}
}

var urlFields = document.querySelectorAll('.mc4wp-form input[type="url"]');
if( urlFields && urlFields.length > 0 ) {
	for( var j=0; j < urlFields.length; j++ ) {
		addEventListener(urlFields[j],'blur',maybePrefixUrlField);
	}
}/* test if browser supports date fields */
var testInput = document.createElement('input');
testInput.setAttribute('type', 'date');
if( testInput.type !== 'date') {

	/* add placeholder & pattern to all date fields */
	var dateFields = document.querySelectorAll('.mc4wp-form input[type="date"]');
	for(var i=0; i<dateFields.length; i++) {
		if(!dateFields[i].placeholder) {
			dateFields[i].placeholder = 'YYYY-MM-DD';
		}
		if(!dateFields[i].pattern) {
			dateFields[i].pattern = '[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])';
		}
	}
}

})();</script>
	<script type="text/javascript">
		window.WPCOM_sharing_counts = {"\/2017\/02\/25\/using-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions\/":222};
	</script>
	<div id="sharing_email" style="display: none;">
		<form action="/azureserverless/2017/02/25/using-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions/" method="post">
			<label for="target_email">Send to Email Address</label>
			<input type="email" name="target_email" id="target_email" value="" />

			
				<label for="source_name">Your Name</label>
				<input type="text" name="source_name" id="source_name" value="" />

				<label for="source_email">Your Email Address</label>
				<input type="email" name="source_email" id="source_email" value="" />

						<input type="text" id="jetpack-source_f_name" name="source_f_name" class="input" value="" size="25" autocomplete="off" title="This field is for validation and should not be changed" />
			
			<img style="float: right; display: none" class="loading" src="/azureserverless/wp-content/plugins/jetpack/modules/sharedaddy/images/loading.gif" alt="loading" width="16" height="16" />
			<input type="submit" value="Send Email" class="sharing_send" />
			<a rel="nofollow" href="#cancel" class="sharing_cancel">Cancel</a>

			<div class="errors errors-1" style="display: none;">
				Post was not sent - check your email addresses!			</div>

			<div class="errors errors-2" style="display: none;">
				Email check failed, please try again			</div>

			<div class="errors errors-3" style="display: none;">
				Sorry, your blog cannot share posts by email.			</div>
		</form>
	</div>
<script type='text/javascript' src='https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201838'></script>
<script type='text/javascript' src='https://secure.gravatar.com/js/gprofiles.js?ver=2018Sepaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='/azureserverless/wp-content/plugins/jetpack/modules/wpgroho.js?ver=4.9.8'></script>
<script type='text/javascript' src='/azureserverless/wp-includes/js/imagesloaded.min.js?ver=3.2.0'></script>
<script type='text/javascript' src='/azureserverless/wp-includes/js/masonry.min.js?ver=3.3.2'></script>
<script type='text/javascript' src='/azureserverless/wp-content/themes/kent/js/main.js?ver=1.1'></script>
<script type='text/javascript' src='/azureserverless/wp-includes/js/comment-reply.min.js?ver=4.9.8'></script>
<script type='text/javascript' src='/azureserverless/wp-includes/js/wp-embed.min.js?ver=4.9.8'></script>
<script async="async" type='text/javascript' src='/azureserverless/wp-content/plugins/akismet/_inc/form.js?ver=4.0.8'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var mc4wp_forms_config = [];
/* ]]> */
</script>
<script type='text/javascript' src='/azureserverless/wp-content/plugins/mailchimp-for-wp/assets/js/forms-api.min.js?ver=4.2.5'></script>
<!--[if lte IE 9]>
<script type='text/javascript' src='/wp-content/plugins/mailchimp-for-wp/assets/js/third-party/placeholders.min.js?ver=4.2.5'></script>
<![endif]-->
<script type='text/javascript'>
/* <![CDATA[ */
var sharing_js_options = {"lang":"en","counts":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='/azureserverless/wp-content/plugins/jetpack/_inc/build/sharedaddy/sharing.min.js?ver=6.5'></script>
<script type='text/javascript'>
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-twitter', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-facebook', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-linkedin', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomlinkedin', 'menubar=1,resizable=1,width=580,height=450' );
				return false;
			});
</script>

		<!--[if IE]>
		<script type="text/javascript">
			if ( 0 === window.location.hash.indexOf( '#comment-' ) ) {
				// window.location.reload() doesn't respect the Hash in IE
				window.location.hash = window.location.hash;
			}
		</script>
		<![endif]-->
		<script type="text/javascript">
			(function () {
				var comm_par_el = document.getElementById( 'comment_parent' ),
					comm_par = ( comm_par_el && comm_par_el.value ) ? comm_par_el.value : '',
					frame = document.getElementById( 'jetpack_remote_comment' ),
					tellFrameNewParent;

				tellFrameNewParent = function () {
					if ( comm_par ) {
						frame.src = "http://jetpack.wordpress.com/jetpack-comment/?blogid=119351739&postid=222&comment_registration=0&require_name_email=1&stc_enabled=1&stb_enabled=1&show_avatars=1&avatar_default=mystery&greeting=Leave+a+Reply&greeting_reply=Leave+a+Reply+to+%25s&color_scheme=light&lang=en_GB&jetpack_version=6.5&show_cookie_consent=10&has_cookie_consent=0&sig=69cb2cc062caf0d72ff5637e820d5d4432ff3fac#parent=%2F2017%2F02%2F25%2Fusing-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions%2F" + '&replytocom=' + parseInt( comm_par, 10 ).toString();
					} else {
						frame.src = "http://jetpack.wordpress.com/jetpack-comment/?blogid=119351739&postid=222&comment_registration=0&require_name_email=1&stc_enabled=1&stb_enabled=1&show_avatars=1&avatar_default=mystery&greeting=Leave+a+Reply&greeting_reply=Leave+a+Reply+to+%25s&color_scheme=light&lang=en_GB&jetpack_version=6.5&show_cookie_consent=10&has_cookie_consent=0&sig=69cb2cc062caf0d72ff5637e820d5d4432ff3fac#parent=%2F2017%2F02%2F25%2Fusing-reactive-streams-on-serverless-with-cyclejs-xstream-and-azure-functions%2F";
					}
				};

				
				if ( 'undefined' !== typeof addComment ) {
					addComment._Jetpack_moveForm = addComment.moveForm;

					addComment.moveForm = function ( commId, parentId, respondId, postId ) {
						var returnValue = addComment._Jetpack_moveForm( commId, parentId, respondId, postId ),
							cancelClick, cancel;

						if ( false === returnValue ) {
							cancel = document.getElementById( 'cancel-comment-reply-link' );
							cancelClick = cancel.onclick;
							cancel.onclick = function () {
								var cancelReturn = cancelClick.call( this );
								if ( false !== cancelReturn ) {
									return cancelReturn;
								}

								if ( ! comm_par ) {
									return cancelReturn;
								}

								comm_par = 0;

								tellFrameNewParent();

								return cancelReturn;
							};
						}

						if ( comm_par == parentId ) {
							return returnValue;
						}

						comm_par = parentId;

						tellFrameNewParent();

						return returnValue;
					};
				}

				
				// Do the post message bit after the dom has loaded.
				document.addEventListener( 'DOMContentLoaded', function () {
					var iframe_url = "http:\/\/jetpack.wordpress.com";
					if ( window.postMessage ) {
						if ( document.addEventListener ) {
							window.addEventListener( 'message', function ( event ) {
								var origin = event.origin.replace( /^http:\/\//i, 'https://' );
								if ( iframe_url.replace( /^http:\/\//i, 'https://' ) !== origin ) {
									return;
								}
								jQuery( frame ).height( event.data );
							});
						} else if ( document.attachEvent ) {
							window.attachEvent( 'message', function ( event ) {
								var origin = event.origin.replace( /^http:\/\//i, 'https://' );
								if ( iframe_url.replace( /^http:\/\//i, 'https://' ) !== origin ) {
									return;
								}
								jQuery( frame ).height( event.data );
							});
						}
					}
				})

			})();
		</script>

		<script type='text/javascript' src='https://stats.wp.com/e-201838.js' async='async' defer='defer'></script>
<script type='text/javascript'>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:6.5',blog:'119351739',post:'222',tz:'0',srv:'azureserverless.com'} ]);
	_stq.push([ 'clickTrackerInit', '119351739', '222' ]);
</script>

</body>
</html>

<!--Generated by Endurance Page Cache-->